<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Core -->
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <title>TimeProofs — The Open Standard for Digital Proof of Existence</title>
  <meta name="description" content="TimeProofs is the open, privacy-first protocol for digital proof of existence. Hash locally, timestamp instantly, verify publicly — for AI, data, and every digital creation."/>
  <meta name="keywords" content="digital proof,timestamp API,content authenticity,AI provenance,TimeProofs,proof of existence,hashing,SHA-256"/>
  <meta name="robots" content="index,follow"/>
  <meta name="theme-color" content="#0b1020"/>
  <meta name="referrer" content="strict-origin-when-cross-origin"/>
  <link rel="canonical" href="https://timeproofs.io/"/>

  <!-- Alt feeds -->
  <link rel="alternate" type="application/rss+xml" title="TimeProofs RSS" href="/rss.xml"/>
  <link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"/>

  <!-- Perf -->
  <link rel="preconnect" href="https://api.timeproofs.io" crossorigin/>
  <link rel="dns-prefetch" href="//api.timeproofs.io"/>
  <link rel="preconnect" href="https://plausible.io" crossorigin>
  <link rel="preload" as="image" href="/logo%20(1).png" fetchpriority="high"/>

  <!-- Icons / Manifest -->
  <link rel="icon" href="/favicon.ico" sizes="any"/>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
  <link rel="manifest" href="/site.webmanifest"/>
  <link rel="alternate" type="application/yaml" href="/openapi.yaml"/>
  <link rel="author" href="/humans.txt"/>
  <link rel="status" href="https://status.timeproofs.io"/>

  <!-- Social -->
  <meta property="og:title" content="TimeProofs — The Open Standard for Digital Proof of Existence"/>
  <meta property="og:description" content="Open protocol + simple API to prove when something existed and that it hasn't changed — for any data."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://timeproofs.io/"/>
  <meta property="og:image" content="https://timeproofs.io/og.png"/>
  <meta property="og:image:alt" content="TimeProofs — Open protocol for proof of existence"/>
  <meta property="og:image:width" content="1200"/>
  <meta property="og:image:height" content="630"/>
  <meta property="og:site_name" content="TimeProofs"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:locale:alternate" content="fr_FR"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="TimeProofs — The Open Standard for Digital Proof of Existence"/>
  <meta name="twitter:description" content="Hash locally. Timestamp instantly. Verify publicly. For AI, data, and every digital creation."/>
  <meta name="twitter:image" content="https://timeproofs.io/og.png"/>

  <!-- JSON-LD Org + Site -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"TimeProofs","url":"https://timeproofs.io/","logo":"https://timeproofs.io/logo%20(1).png","sameAs":["https://x.com/timeproofs","https://github.com/BACOUL/timeproofs/tree/timeproofsv2","https://www.linkedin.com/company/timeproofs","https://youtube.com/@timeproofs","https://timeproofs.io/rss.xml"]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebSite","name":"TimeProofs","url":"https://timeproofs.io/"}
  </script>

  <!-- Security meta -->
  <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()">

  <!-- CSP v01 -->
  <meta http-equiv="Content-Security-Policy" content="
default-src 'self' https://api.timeproofs.io;
worker-src 'self' blob:;
img-src 'self' data: https:;
style-src 'self' 'unsafe-inline';
script-src 'self' 'nonce-TP-2025' https://plausible.io;
connect-src 'self' https://api.timeproofs.io https://plausible.io;
font-src 'self' https: data:;
object-src 'none';
base-uri 'self';
form-action 'self';
frame-ancestors 'none';
upgrade-insecure-requests">

  <!-- Analytics -->
  <script defer data-domain="timeproofs.io" src="https://plausible.io/js/script.js" nonce="TP-2025"></script>

  <!-- Styles -->
  <style>
    :root{--bg:#0b1020;--bg2:#0b1226;--panel:#0f172a;--line:#1e293b;--text:#f8fafc;--muted:#94a3b8;--accent:#22d3ee;--ok:#34d399;--err:#ef4444;--ring:0 0 0 1px #1e293b,0 10px 40px rgba(34,211,238,.14);--e:cubic-bezier(.22,.61,.36,1)}
    *{box-sizing:border-box}
    html,body{height:100%;max-width:100%;overflow-x:hidden;background:var(--bg);scroll-behavior:smooth}
    body{margin:0;color:var(--text);font:16px/1.65 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background:radial-gradient(1200px 600px at 80% -10%, rgba(34,211,238,.06), transparent 60%),conic-gradient(from 220deg at 10% -20%, rgba(34,211,238,.04), transparent 30%),var(--bg)}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}.skip:focus{position:fixed;left:12px;top:12px;width:auto;height:auto;padding:8px 12px;background:#0d2330;color:#bff1ff;border:1px solid #214a57;border-radius:8px;z-index:2000}

    /* Header */
    .tp-header{position:fixed;inset:0 0 auto 0;height:64px;z-index:1000;background:rgba(11,16,32,.55);backdrop-filter:blur(10px);border-bottom:1px solid var(--line);display:flex;align-items:center;justify-content:space-between;padding:0 16px;transition:background .25s var(--e)}
    .tp-header.scrolled{background:rgba(11,16,32,.88)}
    .tp-brand{display:flex;align-items:center;gap:10px;color:var(--text);font-weight:900;letter-spacing:.2px;font-size:1.08rem;text-decoration:none}
    .tp-brand img{height:40px;width:40px;object-fit:contain}
    .tp-burger{display:inline-flex;align-items:center;justify-content:center;width:48px;height:48px;border:1px solid var(--line);border-radius:12px;background:#0d1628;color:var(--text);cursor:pointer}
    .tp-nav a{color:var(--text);font-weight:700;margin-left:18px;padding:10px 0;display:inline-block;text-decoration:none}
    .tp-nav a[aria-current="page"]{color:#9beefb}.tp-nav a:hover{color:var(--accent)}
    @media (min-width:900px){.tp-burger{display:none}.tp-nav{display:flex;align-items:center}}
    @media (max-width:899px){
      .tp-nav{position:fixed;top:64px;left:0;right:0;background:#0c1424;border-top:1px solid var(--line);display:flex;flex-direction:column;gap:10px;padding:14px 16px;box-shadow:0 16px 40px rgba(0,0,0,.45);transform:translateY(-10px);opacity:0;pointer-events:none;transition:opacity .2s ease, transform .2s ease}
      .tp-nav a{margin:4px 0}
      .tp-nav[data-state="open"]{transform:translateY(0);opacity:1;pointer-events:auto}
      .tp-brand img{height:34px;width:34px}
    }

    .wrap{max-width:1200px;margin:0 auto;padding:0 16px}

    /* Hero */
    .hero{min-height:calc(100svh - 64px);padding-top:92px;padding-bottom:34px;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;position:relative;isolation:isolate}
    .label{display:inline-flex;gap:8px;align-items:center;padding:6px 12px;border:1px solid #214a57;background:#0d2330;color:#bff1ff;border-radius:999px;font-size:.85rem;margin-bottom:12px;box-shadow:var(--ring)}
    .title{font-size:clamp(2.2rem,6.2vw,3.4rem);line-height:1.06;margin:.2em auto .3em;font-weight:900;max-width:1000px;background:linear-gradient(90deg,#e6fbff,#9beefb 35%,#e6fbff);-webkit-background-clip:text;background-clip:text;color:transparent;background-size:220% 100%;text-shadow:0 2px 40px rgba(34,211,238,.10)}
    .subtitle{color:var(--muted);max-width:820px;margin:0 auto 18px;line-height:1.7;font-size:clamp(1rem,2.8vw,1.15rem);padding:0 6px}
    .subnote{color:#9fb3c9;margin-top:-6px;margin-bottom:14px}
    .cta-wrap{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:12px}
    .cta{background:var(--accent);color:#06202a;border:none;padding:14px 18px;border-radius:12px;font-weight:700;box-shadow:0 8px 30px rgba(34,211,238,.18);transition:transform .18s var(--e), box-shadow .18s}
    .cta.secondary{background:#111d33;color:#e2f6ff;border:1px solid #1e2a3e;font-weight:600}
    .cta:hover{transform:translateY(-2px);box-shadow:0 12px 38px rgba(34,211,238,.25)}

    /* Demo */
    .demo{margin-top:18px;display:grid;gap:12px;width:min(900px,100%);padding:14px;border-radius:16px;background:linear-gradient(180deg,#0b1324,#0a152e);border:1px solid #1f2a44;box-shadow:var(--ring)}
    .demo form{display:grid;gap:10px}
    .row{display:grid;grid-template-columns:1fr auto;gap:10px}
    .in{width:100%;padding:12px 12px;border-radius:12px;background:#0d1628;border:1px solid #22314f;color:#e6f6ff;font:inherit}
    .btn{padding:12px 16px;min-height:48px;border-radius:12px;border:1px solid #22455a;background:#0c1a2e;color:#cfefff;cursor:pointer;font-weight:800;display:inline-flex;align-items:center;gap:8px}
    .btn:hover{filter:brightness(1.08)}
    .kv{display:grid;gap:8px;background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:10px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:.92rem;color:#dbe7f3;text-align:left;max-height:220px;overflow:auto}
    .mini{color:#9fb3c9;font-size:.9rem;text-align:left}
    .status{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;border:1px solid transparent;font-weight:700;width:max-content}
    .status.ok{color:#a7f3d0;background:#052f2a;border-color:#065f46}
    .status.err{color:#fecaca;background:#2a0d0d;border-color:#7f1d1d}
    .toast{position:fixed;right:14px;bottom:14px;background:#0f1b30;color:#cfefff;border:1px solid #1f2a4a;border-radius:10px;padding:8px 12px;box-shadow:var(--ring);opacity:0;transform:translateY(8px);transition:all .2s ease;z-index:1200}
    .toast.show{opacity:1;transform:none}

    /* Sections */
    .section{padding:44px 0;position:relative}
    .section h2{color:#b9e7f5;font-size:clamp(1.3rem,2.6vw,1.6rem);margin:0 0 14px;text-align:center}
    .grid{display:grid;gap:16px}
    .grid.three{grid-template-columns:1fr}
    .grid.two{grid-template-columns:1fr}
    @media(min-width:900px){.grid.three{grid-template-columns:repeat(3,1fr)}.grid.two{grid-template-columns:1fr 1fr}}
    .section.bg-alt{background:linear-gradient(180deg,#0b1020,#0c1424);border-top:1px solid #121a2e;border-bottom:1px solid #121a2e}
    .section.bg-solid{background:#0d1628;border-top:1px solid #1a2640;border-bottom:1px solid #1a2640}
    .card{position:relative;border-radius:16px;padding:18px;background:#0c1424;color:#dbe7f3;border:1px solid transparent;transition:transform .18s var(--e);max-width:760px;margin-inline:auto}
    .card::before{content:"";position:absolute;inset:0;border-radius:inherit;padding:1px;background:linear-gradient(135deg, rgba(34,211,238,.35), rgba(34,211,238,.05));-webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
    .card:hover{transform:translateY(-2px) perspective(600px) rotateX(1.2deg) rotateY(.8deg)}
    .card h3{color:#22d3ee;margin:.2em 0 .3em;font-size:1.08rem}
    .card p{margin:.15em 0 .4em;line-height:1.6}
    pre,code{white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere}
    pre{max-width:100%;overflow:auto;padding:12px;border-radius:12px;background:#0b1426;border:1px solid #1f2a44;font-size:.95rem}

    /* Footer */
    footer{border-top:1px solid var(--line);margin-top:44px;padding:18px;color:#7c8aa5;text-align:center}
    footer .badges{display:flex;gap:8px;justify-content:center;margin:10px 0}
    footer .badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#0d1628;font-size:.9rem;color:#cfefff}
    .social{display:flex;gap:10px;justify-content:center;margin-top:10px}
    .social a{display:inline-flex;width:40px;height:40px;border:1px solid var(--line);border-radius:12px;align-items:center;justify-content:center;background:#0d1628;transition:transform .18s var(--e);color:#cfefff}
    .social a:hover{transform:translateY(-2px)}

    /* Reveal + progress */
    .reveal{opacity:0;transform:translateY(16px);transition:opacity .5s ease, transform .5s ease;will-change:transform,opacity}
    .reveal.is-in{opacity:1;transform:none}
    .progress{position:fixed;left:0;top:64px;width:100%;height:2px;background:linear-gradient(90deg, rgba(34,211,238,.0), rgba(34,211,238,.35));transform-origin:left;scale:0 1;z-index:900}

    /* Focus */
    a:focus-visible,.cta:focus-visible,.btn:focus-visible,.tp-burger:focus-visible{outline:2px solid #22d3ee;outline-offset:3px;border-radius:12px}

    /* Mobile */
    @media (max-width:899px){
      .hero{padding-top:92px;padding-bottom:24px}
      .section{padding:28px 0}
      .grid.two,.grid.three{grid-template-columns:1fr}
      .row{grid-template-columns:1fr}
      .btn,.in{width:100%}
      pre{font-size:.9rem}
    }
    @media (prefers-reduced-motion: reduce){.reveal{opacity:1 !important;transform:none !important}}
  </style>

  <noscript><style>.reveal{opacity:1 !important; transform:none !important}</style></noscript>
</head>
<body>
  <a href="#main" class="skip">Skip to main content</a>

  <!-- Header (brand left, menu right) -->
  <header class="tp-header" id="hdr" role="banner">
    <a class="tp-brand" href="/" aria-label="TimeProofs Home" aria-current="page">
      <img src="/logo%20(1).png" alt="TimeProofs logo" width="40" height="40" decoding="async" fetchpriority="high"/>
      <span>TimeProofs</span>
    </a>
    <button class="tp-burger" id="tp-burger" aria-label="Open menu" aria-expanded="false" aria-controls="tp-nav"><span aria-hidden="true">☰</span></button>
    <nav id="tp-nav" class="tp-nav" data-state="closed" aria-label="Main Navigation">
      <a href="/proofspec.html">Protocol (ProofSpec)</a>
      <a href="/use-cases.html">Use Cases</a>
      <a href="/verify.html">Create/Verify</a>
      <a href="#regulatory">Regulations</a>
      <a href="/docs.html">API Docs</a>
      <a href="/security.html">Security</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/legal.html">Legal</a>
    </nav>
  </header>

  <!-- Progress -->
  <div class="progress" id="progress" aria-hidden="true"></div>

  <!-- Main -->
  <main id="main" class="wrap" role="main">
    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="label">🔐 Privacy-first • ⚡ Edge-native • 🌍 Open Protocol</div>
      <h1 id="hero-title" class="title">The Open Standard for Digital Proof of Existence</h1>
      <p class="subtitle">Prove when something existed. Private by design. One open format. Fully verifiable.</p>
      <p class="subnote">Hash locally · Timestamp via API · Verify publicly</p>
      <div class="cta-wrap" role="group" aria-label="Primary actions">
        <a class="cta" href="/proofspec.html" aria-label="Read the ProofSpec">Read the ProofSpec</a>
        <a class="cta secondary" href="/verify.html" aria-label="Create or verify a proof">Create or Verify a Proof</a>
      </div>

      <!-- Live demo -->
      <div class="demo" aria-label="Instant demo">
        <!-- CREATE -->
        <form id="form-create" autocomplete="off" style="display:grid;gap:10px">
          <strong>Create a Proof</strong>
          <div class="row">
            <input id="in-create" class="in" placeholder="Paste text to hash & timestamp (local hashing)" aria-label="Text to hash"/>
            <button type="button" id="btn-create" class="btn">Create Proof</button>
          </div>
          <div class="mini">We hash locally, then call <code>/api/timestamp</code>.</div>
          <div id="out-create" class="kv" role="region" aria-live="polite"></div>
          <div id="status-create" class="status" aria-live="polite" hidden></div>
        </form>

        <hr style="border:none;border-top:1px solid #1f2a44;margin:8px 0"/>

        <!-- VERIFY -->
        <form id="form-verify" autocomplete="off" style="display:grid;gap:10px">
          <strong>Verify a Proof</strong>
          <div class="row">
            <input id="in-verify" class="in" placeholder="Enter a 64-hex SHA-256 to verify" aria-label="Hash to verify"/>
            <button type="button" id="btn-verify" class="btn">Verify Proof</button>
          </div>
          <div class="mini">Calls <code>/api/verify?hash=…</code>. Result shows green/red.</div>
          <div id="out-verify" class="kv" role="region" aria-live="polite"></div>
          <div id="status-verify" class="status" aria-live="polite" hidden></div>
        </form>
      </div>

      <div class="bullets" aria-label="Key features" style="margin-top:8px; display:flex; flex-wrap:wrap; gap:10px; justify-content:center; color:#a3b7c7;">
        <span class="tag">Hash-only</span><span class="tag">Signed timestamp (HMAC-SHA256)</span><span class="tag">Public verification</span>
      </div>
    </section>

    <!-- WHAT + WHY -->
    <section class="section bg-alt reveal" aria-labelledby="built">
      <h2 id="built">What we’ve built and why it matters</h2>
      <div class="grid two">
        <article class="card"><h3>What we’ve built</h3><p>TimeProofs is an open, neutral protocol for digital proof of existence. For every digital creation and dataset. One proof readable by any ProofSpec-compliant tool.</p></article>
        <article class="card"><h3>Why it matters</h3><p>Proof is essential like HTTPS. TimeProofs gives each file and API a verifiable history: when it existed and what hasn’t changed.</p></article>
      </div>
    </section>

    <!-- PROTOCOL VS API -->
    <section class="section bg-solid reveal" aria-labelledby="pva">
      <h2 id="pva">Protocol vs API</h2>
      <div class="grid two">
        <article class="card">
          <h3>Protocol — ProofSpec</h3>
          <p>Open rules, interoperable, peer-verifiable. Public specification designed to become a global standard.</p>
          <p><a href="/proofspec.html">Read ProofSpec v1 (Draft)</a></p>
        </article>
        <article class="card">
          <h3>API — Reference implementation</h3>
          <p>Edge-native and predictable cost. Copy-paste examples and verifiable logs.</p>
          <p><a href="/docs.html">Open the API Docs</a></p>
        </article>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section class="section bg-alt reveal" aria-labelledby="how">
      <h2 id="how">How it works</h2>
<pre><code>// 1) Hash locally
const buf = new TextEncoder().encode(text);
const digest = await crypto.subtle.digest('SHA-256', buf);
const hash = [...new Uint8Array(digest)].map(b=>b.toString(16).padStart(2,'0')).join('');

// 2) Timestamp
const r = await fetch("https://api.timeproofs.io/api/timestamp", {
  method:"POST", headers:{ "Content-Type":"application/json", "Accept":"application/json" },
  body: JSON.stringify({ hash, type:"event", meta:{ source:"web" } })
});
const proof = await r.json();

// 3) Verify anywhere
const res = await fetch("https://api.timeproofs.io/api/verify?hash="+hash,
  { headers:{ "Accept":"application/json" } });
const check = await res.json();</code></pre>
    </section>

    <!-- REGULATORY ERA (menu → #regulatory) -->
    <section class="section bg-solid reveal" id="regulatory" aria-labelledby="reg-title">
      <h2 id="reg-title">Built for the Regulatory Era</h2>
      <div class="grid two">
        <article class="card"><h3>EU AI Act</h3><p>Traceability of AI outputs and prompts.</p><p><span class="tag">Signed timestamp</span> · <span class="tag">Public verification</span></p></article>
        <article class="card"><h3>GDPR</h3><p>Privacy by design. No personal data stored.</p><p><span class="tag">Hash-only</span> · <span class="tag">No uploads</span></p></article>
        <article class="card"><h3>DSA / Data Act</h3><p>Content integrity and data provenance.</p><p><span class="tag">Event proofs</span> · <span class="tag">Chain of custody</span></p></article>
        <article class="card"><h3>NIS2 / Supply chain</h3><p>Release & binary integrity for software.</p><p><span class="tag">Proof links</span> · <span class="tag">CI/CD verify</span></p></article>
      </div>
    </section>

    <!-- TRUST: site verified -->
    <section class="section bg-solid reveal" aria-labelledby="site-proof">
      <h2 id="site-proof">This site is verified by TimeProofs</h2>
      <p>We publish a public proof of this website build. Anyone can check it.</p>
      <p>Release: <code>TP-v0.1</code> · Hash:
        <code id="rel-proof-hash">b67b94aef97040f0e56c73ec6e6c07e42807a55a390c26fe2fbefc8a0e6bcec3</code>
        · <a id="rel-proof-link" href="https://api.timeproofs.io/api/verify?hash=b67b94aef97040f0e56c73ec6e6c07e42807a55a390c26fe2fbefc8a0e6bcec3" target="_blank" rel="noopener">Verify</a>
      </p>
    </section>

    <!-- Personas, Social proof, IP, FAQ, Final CTA (inchangés pour v01) -->
    <!-- ... sections identiques à ta version précédente ... -->
  </main>

  <!-- Footer -->
  <footer role="contentinfo" aria-label="Site footer">
    <div class="badges">
      <span class="badge">⚡ Edge Native</span>
      <span class="badge">🛡 Privacy First</span>
      <a class="badge" href="/proofspec.html">🔍 Open Spec v0.1</a>
    </div>
    © 2025 TimeProofs — Reference implementation of the ProofSpec protocol.
    <div class="links" style="margin-top:6px">
      <a href="/" aria-current="page">Home</a> •
      <a href="/proofspec.html">Protocol</a> •
      <a href="/use-cases.html">Use Cases</a> •
      <a href="/verify.html">Create/Verify</a> •
      <a href="#regulatory">Regulations</a> •
      <a href="/docs.html">API Docs</a> •
      <a href="/.well-known/security.txt">Security.txt</a> •
      <a href="/privacy.html">Privacy</a> •
      <a href="/legal.html">Legal</a> •
      <a href="/humans.txt">humans.txt</a>
    </div>
  </footer>

  <!-- App Scripts -->
  <script defer nonce="TP-2025">
  (function(){
    // Header + progress
    const hdr=document.getElementById('hdr'); const bar=document.getElementById('progress');
    function onScroll(){ if(window.scrollY>6) hdr.classList.add('scrolled'); else hdr.classList.remove('scrolled');
      const h=document.documentElement; const p=(h.scrollTop)/((h.scrollHeight-h.clientHeight)||1); bar.style.transform=`scaleX(${Math.max(0,Math.min(1,p))})`; }
    onScroll(); window.addEventListener('scroll', onScroll, { passive:true });

    // Burger
    const burger=document.getElementById('tp-burger'); const nav=document.getElementById('tp-nav');
    function openMenu(){ nav.setAttribute('data-state','open'); burger.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
    function closeMenu(){ nav.setAttribute('data-state','closed'); burger.setAttribute('aria-expanded','false'); document.body.style.overflow=''; }
    function toggleMenu(){ (nav.getAttribute('data-state')==='open')?closeMenu():openMenu(); }
    burger.addEventListener('click', toggleMenu, { passive:true });
    document.addEventListener('click', (e)=>{ if(window.matchMedia('(min-width: 900px)').matches) return; if(!e.target.closest('.tp-header')&&nav.getAttribute('data-state')==='open') closeMenu(); }, { passive:true });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'&&nav.getAttribute('data-state')==='open') closeMenu(); }, { passive:true });
    window.addEventListener('resize', ()=>{ if(window.matchMedia('(min-width: 900px)').matches) closeMenu(); }, { passive:true });

    // Reveal
    const prefersReduced=window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(!prefersReduced){
      const targets=[...document.querySelectorAll('.section'), ...document.querySelectorAll('.card'), ...document.querySelectorAll('details')];
      const io=new IntersectionObserver((ents)=>{
        ents.forEach(e=>{ if(e.isIntersecting){ const el=e.target; const idx=[...el.parentElement?.children||[]].indexOf?.(el) ?? 0; el.style.transitionDelay=(idx*60)+'ms'; el.classList.add('reveal','is-in'); io.unobserve(el);} });
      }, { rootMargin:'-10% 0px -10% 0px', threshold:0.08 });
      targets.forEach(el=>{ el.classList.add('reveal'); io.observe(el); });
    }

    // Toast helper
    const toast=(msg)=>{ let t=document.querySelector('.toast'); if(!t){ t=document.createElement('div'); t.className='toast'; document.body.appendChild(t); } t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1600); };

    // Helpers
    const $=(id)=>document.getElementById(id);
    async function sha256Hex(str){ const buf=new TextEncoder().encode(str); const digest=await crypto.subtle.digest('SHA-256', buf); return [...new Uint8Array(digest)].map(b=>b.toString(16).padStart(2,'0')).join(''); }
    function showKV(el,obj,label){ const t=typeof obj==='string'?obj:JSON.stringify(obj,null,2); el.textContent=(label?`// ${label}\n`:'')+t; }
    function showStatus(el,ok,text){ el.hidden=false; el.className='status '+(ok?'ok':'err'); el.textContent=(ok?'✓ ':'✗ ')+text; }

    // CREATE
    $('btn-create').addEventListener('click', async ()=>{
      const v=$('in-create').value||''; if(!v.trim()){ showStatus($('status-create'), false, 'Provide content to hash.'); return; }
      try{
        const h=await sha256Hex(v);
        showKV($('out-create'), {hash:h}, 'Local SHA-256');
        const r=await fetch('https://api.timeproofs.io/api/timestamp',{ method:'POST', headers:{'Content-Type':'application/json','Accept':'application/json'}, body: JSON.stringify({ hash:h, type:'event', meta:{ source:'web:home' } }) });
        const j=await r.json();
        showKV($('out-create'), j, 'Timestamp response');
        const ok=!!j.ok || (!!j.signature && !!j.timestamp);
        showStatus($('status-create'), ok, ok?'Proof created':'Create failed');
      }catch(e){ showStatus($('status-create'), false, 'Network or CORS error'); }
    });

    // VERIFY
    $('btn-verify').addEventListener('click', async ()=>{
      const h=$('in-verify').value.trim();
      if(!h){ showStatus($('status-verify'), false, 'Provide a hash to verify.'); return; }
      if(!/^[a-f0-9]{64}$/i.test(h)){ showStatus($('status-verify'), false, 'Hash must be 64 hex chars'); return; }
      try{
        const r=await fetch('https://api.timeproofs.io/api/verify?hash='+encodeURIComponent(h),{ headers:{'Accept':'application/json'} });
        const j=await r.json();
        showKV($('out-verify'), j, 'Verify response');
        const ok=!!j.valid || j.ok===true || j.result==='valid';
        showStatus($('status-verify'), ok, ok?'Valid proof':'Invalid or not found');
      }catch(e){ showStatus($('status-verify'), false, 'Network or CORS error'); }
    });

    // Release proof link
    (function(){
      const hp=document.getElementById('rel-proof-hash'); if(!hp) return;
      const val=hp.textContent.trim(); const a=document.getElementById('rel-proof-link');
      if(a && val && !val.startsWith('PUT_')) a.href='https://api.timeproofs.io/api/verify?hash='+encodeURIComponent(val);
    })();
  })();
  </script>

  <!-- Register Service Worker -->
  <script nonce="TP-2025">
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js', { type: 'module', scope: '/' }).catch(()=>{});
    }
  </script>

  <!-- Toast container -->
  <div class="toast" role="status" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
