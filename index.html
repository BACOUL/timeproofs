<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Core -->
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark"/>
  <title>TimeProofs — Proof of Existence for AI & Developers</title>
  <meta name="description" content="Hash locally. Timestamp via API. Verify publicly. Private, instant, edge-native proofs of existence for anything digital."/>
  <meta name="robots" content="index,follow"/>
  <meta name="referrer" content="strict-origin-when-cross-origin"/>
  <link rel="canonical" href="https://timeproofs.io/index.html"/>

  <!-- Theme -->
  <meta name="theme-color" content="#0b1020"/>

  <!-- CSP v0.1 (aligned) -->
  <meta http-equiv="Content-Security-Policy" content="
default-src 'self';
img-src 'self' https: data:;
style-src 'self' 'unsafe-inline';
script-src 'self' 'nonce-TP-2025';
connect-src 'self' https://api.timeproofs.io https://timeproofs-api-v1.jeason-bacoul.workers.dev;
font-src 'self' https: data:;
base-uri 'self';
frame-ancestors 'self';
upgrade-insecure-requests">

  <!-- Perf -->
  <link rel="preconnect" href="https://api.timeproofs.io" crossorigin>
  <link rel="dns-prefetch" href="//api.timeproofs.io">
  <link rel="preconnect" href="https://timeproofs-api-v1.jeason-bacoul.workers.dev" crossorigin>
  <link rel="dns-prefetch" href="//timeproofs-api-v1.jeason-bacoul.workers.dev">

  <!-- Icons / Manifest -->
  <link rel="icon" href="/favicon.ico" sizes="any"/>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml"/>
  <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
  <link rel="manifest" href="/site.webmanifest"/>

  <!-- Social -->
  <meta property="og:title" content="TimeProofs — Proof of Existence"/>
  <meta property="og:description" content="Add a cryptographic moment-in-time to anything that matters — instant, private, verifiable."/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://timeproofs.io/"/>
  <meta property="og:image" content="https://timeproofs.io/og.png"/>
  <meta property="og:image:alt" content="TimeProofs — hash locally, verify publicly"/>
  <meta property="og:site_name" content="TimeProofs"/>
  <meta property="og:locale" content="en_US"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:title" content="TimeProofs — Proof of Existence"/>
  <meta name="twitter:description" content="Hash locally. Timestamp via API. Verify publicly. No blockchain."/>
  <meta name="twitter:image" content="https://timeproofs.io/og.png"/>

  <!-- Feeds -->
  <link rel="alternate" type="application/rss+xml" title="TimeProofs RSS" href="/rss.xml"/>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"TimeProofs","url":"https://timeproofs.io/","logo":"https://timeproofs.io/logo%20(1).png","sameAs":["https://x.com/timeproofs","https://github.com/BACOUL/timeproofs","https://www.linkedin.com/company/timeproofs","https://youtube.com/@timeproofs","https://timeproofs.io/rss.xml"]}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebSite","name":"TimeProofs","url":"https://timeproofs.io/","potentialAction":{"@type":"SearchAction","target":"https://timeproofs.io/verify.html?hash={hash}","query-input":"required name=hash"}}
  </script>

  <!-- Styles -->
  <style>
    :root{
      --bg:#0b1020; --panel:#0f172a; --line:#1e293b;
      --text:#f8fafc; --muted:#94a3b8; --accent:#22d3ee;
      --ok:#22c55e; --bad:#ef4444;
      --header-h:64px;
      --safe-top: env(safe-area-inset-top,0px);
      --safe-btm: env(safe-area-inset-bottom,0px);
    }
    @media (max-width:900px){ :root{ --header-h:56px } }
    *{ box-sizing:border-box }
    html,body{ height:100%; max-width:100%; overflow-x:hidden }
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1000px 420px at 70% -10%, rgba(34,211,238,.10), transparent 60%), var(--bg);
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      padding-top: calc(var(--header-h) + var(--safe-top));
    }
    a{ color:var(--accent); text-decoration:none } a:hover{ text-decoration:underline }

    /* Header */
    .tp-header{
      position:fixed; inset:0 0 auto 0; height:var(--header-h); z-index:1000;
      background:rgba(11,16,32,.7); backdrop-filter:blur(8px); border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; padding:0 16px;
    }
    .tp-brand{ display:flex; align-items:center; gap:10px; color:var(--text); font-weight:900; letter-spacing:.2px; font-size:1.08rem }
    .tp-brand img{ height:40px; width:auto; object-fit:contain }
    @media(max-width:899px){ .tp-brand img{ height:34px } }
    .tp-burger{ display:inline-flex; align-items:center; justify-content:center; width:42px; height:42px; border:1px solid var(--line); border-radius:10px; background:#0d1628; color:#fff; cursor:pointer }
    .tp-nav a{ color:var(--text); font-weight:700; margin-left:18px; padding:8px 0; display:inline-block }
    .tp-nav a[aria-current="page"]{ color:#9beefb } .tp-nav a:hover{ color:var(--accent) }
    @media(min-width:900px){ .tp-burger{ display:none } .tp-nav{ display:flex; align-items:center } }
    @media(max-width:899px){
      .tp-nav{
        position:fixed; top:calc(var(--header-h) + var(--safe-top)); left:0; right:0; background:#0c1424; border-top:1px solid var(--line);
        display:flex; flex-direction:column; gap:10px; padding:14px 16px; box-shadow:0 16px 40px rgba(0,0,0,.45);
        transform:translateY(-10px); opacity:0; pointer-events:none; transition:opacity .18s ease, transform .18s ease
      }
      .tp-nav a{ margin:4px 0 } .tp-nav[data-state="open"]{ transform:translateY(0); opacity:1; pointer-events:auto }
    }

    /* Layout */
    main{ padding:24px 20px calc(24px + var(--safe-btm)); max-width:1100px; margin:0 auto }
    h1{ font-size:clamp(1.8rem,4.2vw,2.4rem); margin:.2em 0 .3em; color:#eaf8ff }
    p.lead{ color:var(--muted); max-width:860px; margin:0 0 1.2em }

    /* Hero tool */
    .cv-wrap{ max-width:720px; margin:10px auto 28px }
    .card{ background:#0c1424; border:1px solid var(--line); border-radius:14px; padding:18px }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center }
    .row>*{ flex:1 1 240px }
    label{ display:block; font-size:13px; color:#9fb3c6; margin:8px 0 6px }
    input[type="text"], textarea{ width:100%; background:#0b1220; color:#f8fafc; border:1px solid #1f2937; border-radius:10px; padding:10px 12px }
    .btn{ background:var(--accent); color:#06202a; border:none; padding:11px 16px; border-radius:10px; font-weight:900; cursor:pointer }
    .btn:hover{ filter:brightness(1.05) }
    .ghost{ background:#111d33; color:#e2f6ff; border:1px solid var(--line) }
    .hint{ font-size:12px; color:#93a1b5 }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size:12px }
    .ok{ background:#0f3b22; color:#b7f7ce; border:1px solid #1c6b3d }
    .bad{ background:#3b0f12; color:#ffc1c6; border:1px solid #6b1c22 }
    pre{
      width:100%; background:#0b1220; color:#a7f3d0; border:1px solid #1f2937; border-radius:10px; padding:12px;
      white-space:pre-wrap; word-break:break-word; overflow-wrap:anywhere; font-size:13px; max-height:40vh; overflow:auto;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace
    }
    .summary{ display:grid; grid-template-columns:1fr; gap:8px; margin-top:10px; min-height:88px }
    .summary .row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
    .k{ color:#9fb3c9; min-width:120px } .v{ color:#e6f6ff; font-weight:700; word-break:break-all }
    .badges{ display:flex; gap:8px; flex-wrap:wrap; margin-top:6px }
    .badge{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid #214a57; background:#0d2330; font-size:12px; color:#bff1ff }

    /* Sections */
    h2{ font-size:1.35rem; color:#cfe9ff; margin:1.6em 0 .6em }
    .grid{ display:grid; gap:16px } @media(min-width:900px){ .grid.two{ grid-template-columns:1fr 1fr } .grid.three{ grid-template-columns:1fr 1fr 1fr } }
    .mini-card{ background:#0c1424; border:1px solid var(--line); border-radius:12px; padding:16px }

    footer{ border-top:1px solid var(--line); margin-top:32px; padding:18px; color:#7c8aa5; text-align:center }
    footer a{ color:#a7b7cc; margin:0 8px } footer a:hover{ color:var(--accent) }

    @media (max-width:480px){ .card{ padding:14px } .btn{ width:100%; min-height:44px } input[type="text"], textarea{ font-size:14px } }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="tp-header" role="navigation" aria-label="Main">
    <a class="tp-brand" href="/index.html" aria-label="TimeProofs Home">
      <img src="/logo%20(1).png" alt="TimeProofs logo"/><span>TimeProofs</span>
    </a>
    <button class="tp-burger" id="tp-burger" aria-label="Open menu" aria-expanded="false" aria-controls="tp-nav"><span aria-hidden="true">☰</span></button>
    <nav id="tp-nav" class="tp-nav" data-state="closed">
      <a href="/proofspec.html">Protocol (ProofSpec)</a>
      <a href="/use-cases.html">Use Cases</a>
      <a href="/verify.html">Verify</a>
      <a href="/docs.html">API Docs</a>
      <a href="/security.html">Security</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/legal.html">Legal</a>
    </nav>
  </header>

  <main role="main">
    <h1>TimeProofs — Proof of Existence</h1>
    <p class="lead">Hash locally. Timestamp via API. Verify publicly. No uploads. No blockchain.</p>

    <!-- Hero: Compute / Create / Verify -->
    <section class="cv-wrap" aria-labelledby="cv-title">
      <h2 id="cv-title" style="margin:.2em 0 .4em; text-align:center; font-size:1.2rem; color:#b9e7f5">Compute • Create • Verify</h2>

      <!-- Compute -->
      <div class="card" aria-labelledby="compute-title">
        <label id="compute-title" for="compute-text">Compute SHA-256</label>
        <input id="compute-text" type="text" placeholder="Paste text to hash…" autocomplete="off" spellcheck="false" enterkeyhint="done"/>
        <div class="row" style="margin-top:10px">
          <button id="btn-compute" class="btn" type="button">Compute SHA-256</button>
          <input id="compute-out" type="text" readonly aria-label="SHA-256 output" placeholder="SHA-256 will appear here" />
        </div>
        <div class="hint" style="margin-top:6px">Runs locally in your browser.</div>
      </div>

      <!-- Create -->
      <div class="card" aria-labelledby="create-title" style="margin-top:14px">
        <label id="create-title" for="cv-input">Create Proof</label>
        <input id="cv-input" type="text" placeholder="Paste text to hash or a 64-hex SHA-256…" autocomplete="off" spellcheck="false" enterkeyhint="done"/>
        <div class="row" style="margin-top:10px">
          <button id="btn-create" class="btn" type="button" aria-controls="create-status create-summary create-output">Create Proof</button>
          <button id="btn-download" class="btn ghost" type="button" disabled>Download Proof (.tproof.json)</button>
        </div>
        <div id="create-status" style="margin-top:10px" aria-live="polite"></div>
        <div id="create-summary" class="summary" aria-live="polite"></div>
        <pre id="create-output" aria-live="polite"></pre>
        <div class="badges" aria-hidden="true">
          <span class="badge">Hash-only • Private</span>
          <span class="badge">Signed timestamp (HMAC-SHA256)</span>
          <span class="badge">Public verification</span>
        </div>
      </div>

      <!-- Verify -->
      <div class="card" aria-labelledby="verify-title" style="margin-top:14px">
        <label id="verify-title" for="verify-hash">Verify Proof</label>
        <input id="verify-hash" type="text" placeholder="Paste an existing 64-hex SHA-256…" inputmode="latin" autocapitalize="off" autocomplete="off" spellcheck="false" pattern="[A-Fa-f0-9]{64}" enterkeyhint="go"/>
        <div class="row" style="margin-top:10px">
          <button id="btn-verify" class="btn" type="button" aria-controls="verify-status verify-summary verify-output">Verify</button>
          <a id="open-verify-link" class="btn ghost" href="#" target="_blank" rel="noopener" style="display:none">Open verify page</a>
        </div>
        <div class="hint" style="margin-top:6px">Checks existence, timestamp, and server signature.</div>
        <div id="verify-status" style="margin-top:10px" aria-live="polite"></div>
        <div id="verify-summary" class="summary" aria-live="polite"></div>
        <pre id="verify-output" aria-live="polite"></pre>
      </div>
    </section>

    <!-- Short sections -->
    <h2>What we’ve built and why it matters</h2>
    <div class="grid two">
      <div class="mini-card">
        <p><strong>Zero upload.</strong> Only the hash leaves your device. Original content stays local.</p>
        <p><strong>Edge-native.</strong> Global, low-latency, verifiable by anyone.</p>
      </div>
      <div class="mini-card">
        <p><strong>No blockchain.</strong> Predictable cost, instant results.</p>
        <p><strong>Open spec.</strong> See <a href="/proofspec.html">ProofSpec</a> and <a href="/docs.html">API</a>.</p>
      </div>
    </div>
  </main>

  <footer role="contentinfo">
    © 2025 TimeProofs — Proof of Existence. For Everything.
    <div style="margin-top:6px">
      <a href="/index.html" aria-current="page">Home</a> •
      <a href="/proofspec.html">Protocol</a> •
      <a href="/use-cases.html">Use Cases</a> •
      <a href="/verify.html">Verify</a> •
      <a href="/docs.html">API Docs</a> •
      <a href="/privacy.html">Privacy</a> •
      <a href="/legal.html">Legal</a> •
      <a href="/security.html">Security</a> •
      <a href="https://x.com/timeproofs" target="_blank" rel="noopener">X/Twitter</a> •
      <a href="https://github.com/BACOUL/timeproofs" target="_blank" rel="noopener">GitHub</a>
    </div>
  </footer>

  <script nonce="TP-2025">
    /* Header burger */
    (function(){
      const b=document.getElementById('tp-burger'), n=document.getElementById('tp-nav');
      const open=()=>{n.setAttribute('data-state','open'); b.setAttribute('aria-expanded','true'); document.documentElement.style.overflow='hidden'};
      const close=()=>{n.setAttribute('data-state','closed'); b.setAttribute('aria-expanded','false'); document.documentElement.style.overflow=''};
      const toggle=()=> n.getAttribute('data-state')==='open'?close():open();
      b.addEventListener('click',toggle,{passive:true});
      document.addEventListener('click',(e)=>{ if (matchMedia('(min-width:900px)').matches) return; if (!e.target.closest('.tp-header') && n.getAttribute('data-state')==='open') close(); },{passive:true});
      addEventListener('keydown',(e)=>{ if (e.key==='Escape' && n.getAttribute('data-state')==='open') close(); },{passive:true});
      addEventListener('resize',()=>{ if (matchMedia('(min-width:900px)').matches) close(); },{passive:true});
    })();

    /* API bases */
    const API_BASES=["https://api.timeproofs.io/api","https://timeproofs-api-v1.jeason-bacoul.workers.dev/api"];
    const REQ_TIMEOUT_MS=15000;

    function withTimeout(opts={}){ const c=new AbortController(); const t=setTimeout(()=>c.abort(),REQ_TIMEOUT_MS); return {...opts,signal:c.signal,_tid:t}; }
    async function fetchAPI(path,opts={}){
      let last;
      for (const base of API_BASES){
        try{
          const o=withTimeout(opts);
          const r=await fetch(base+path,o); clearTimeout(o._tid);
          if (r.ok) return r; last=r;
        }catch{}
      }
      return last || new Response(JSON.stringify({ok:false,error:"network"}),{status:503});
    }
    function unwrap(j){
      const d=(j&&typeof j.data==='object')?j.data:j||{};
      return {
        ok:j?.ok===true,
        found:d?.found ?? j?.found ?? undefined,
        hash:d?.hash ?? j?.hash,
        timestamp:d?.timestamp ?? d?.ts ?? j?.timestamp ?? j?.ts ?? null,
        signature:d?.signature ?? d?.sig ?? j?.signature ?? j?.sig ?? null,
        verify_url:d?.verify_url ?? j?.verify_url ?? undefined,
        type:d?.type ?? j?.type ?? null,
        meta:d?.meta ?? j?.meta ?? null,
        algo:d?.algo ?? j?.algo ?? null,
        kid:d?.kid ?? j?.kid ?? null
      };
    }
    function short(h){ return (h && h.length>=16)?`${h.slice(0,10)}…${h.slice(-6)}`:(h||''); }
    function fmt(ts){ if(!ts) return '—'; const d=new Date(String(ts)); return isFinite(d)?d.toLocaleString():String(ts); }
    function set(id,html){ const el=document.getElementById(id); if(el) el.innerHTML=html; }

    /* Compute */
    const btnCompute=document.getElementById('btn-compute');
    const computeText=document.getElementById('compute-text');
    const computeOut=document.getElementById('compute-out');
    async function sha256HexText(str){
      const buf=new TextEncoder().encode(str||'');
      const dig=await crypto.subtle.digest('SHA-256',buf);
      return [...new Uint8Array(dig)].map(b=>b.toString(16).padStart(2,'0')).join('');
    }
    btnCompute.onclick=async ()=>{
      const v=(computeText.value||'');
      computeOut.value = v ? await sha256HexText(v) : '';
    };

    /* Create */
    const cvInput=document.getElementById('cv-input');
    const btnCreate=document.getElementById('btn-create');
    const btnDownload=document.getElementById('btn-download');
    const createStatus=document.getElementById('create-status');
    const createSummary=document.getElementById('create-summary');
    const createOutput=document.getElementById('create-output');

    function isHex64(v){ return /^[a-f0-9]{64}$/i.test(v||''); }

    btnCreate.onclick=async ()=>{
      if (btnCreate.disabled) return;
      btnCreate.disabled=true; btnDownload.disabled=true;
      createStatus.innerHTML=''; createSummary.innerHTML=''; createOutput.textContent='';
      try{
        let v=(cvInput.value||'').trim();
        if (!v) throw new Error('Enter text or a 64-hex hash.');
        const hash = isHex64(v) ? v.toLowerCase() : await sha256HexText(v);

        const req={ hash, type:'event', meta:{ source:'home' } };
        const r=await fetchAPI('/timestamp',{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(req) });
        const j=await r.json().catch(()=>({}));
        if(!r.ok||j.error) throw new Error(j.error||`Request failed (${r.status})`);
        const n=unwrap(j);

        createStatus.innerHTML='<span class="pill ok" role="status">✅ Proof created</span>';
        set('create-summary', `
          <div class="row"><span class="k">Hash</span><span class="v">${short(n.hash)}</span></div>
          <div class="row"><span class="k">Timestamp</span><span class="v">${fmt(n.timestamp)}</span></div>
          <div class="row"><span class="k">Signature</span><span class="v">${n.signature?short(n.signature):'—'}</span></div>
          <div class="row"><span class="k">Verify URL</span><span class="v">${n.verify_url?`<a href="${n.verify_url}" target="_blank" rel="noopener">Open</a>`:'—'}</span></div>
        `);
        createOutput.textContent=JSON.stringify(n,null,2);
        btnDownload.disabled=false;

        // Prefill verify
        document.getElementById('verify-hash').value = n.hash || hash;
        const vOpen=document.getElementById('open-verify-link');
        vOpen.href = n.verify_url || `/verify.html?hash=${encodeURIComponent(n.hash||hash)}`;
        vOpen.style.display='inline-block';
      }catch(e){
        createStatus.innerHTML=`<span class="pill bad" role="alert">❌ ${String(e.message||e)}</span>`;
      }finally{
        btnCreate.disabled=false;
      }
    };

    btnDownload.onclick=()=>{
      try{
        const obj=JSON.parse(createOutput.textContent||'{}');
        const blob=new Blob([JSON.stringify(obj,null,2)],{type:'application/tproof+json'});
        const a=document.createElement('a'); a.href=URL.createObjectURL(blob);
        a.download=`timeproof_${(obj.hash||'proof').slice(0,12)}.tproof.json`; document.body.appendChild(a); a.click(); a.remove();
        setTimeout(()=>URL.revokeObjectURL(a.href), 500);
      }catch{}
    };

    /* Verify */
    const vHash=document.getElementById('verify-hash');
    const btnVerify=document.getElementById('btn-verify');
    const vStatus=document.getElementById('verify-status');
    const vSummary=document.getElementById('verify-summary');
    const vOutput=document.getElementById('verify-output');
    const vOpen=document.getElementById('open-verify-link');

    // Prefill from ?hash=
    const params=new URLSearchParams(location.search); const pre=params.get('hash');
    if (pre && /^[a-f0-9]{64}$/i.test(pre)) { vHash.value=pre; }

    btnVerify.onclick=async ()=>{
      if (btnVerify.disabled) return;
      btnVerify.disabled=true; vStatus.innerHTML=''; vSummary.innerHTML=''; vOutput.textContent='';
      try{
        const h=(vHash.value||'').trim().toLowerCase();
        if(!isHex64(h)){ vHash.setAttribute('aria-invalid','true'); throw new Error('Invalid hash. Use 64 hex chars.'); }
        vHash.removeAttribute('aria-invalid');

        const r=await fetchAPI(`/verify?hash=${encodeURIComponent(h)}`);
        const j=await r.json().catch(()=>({}));
        const n=unwrap(j);
        const found = n.found===true || !!(n.timestamp || n.signature);

        if (n.ok && found) vStatus.innerHTML='<span class="pill ok" role="status">✅ Valid</span>';
        else if (r.status===404 || j.error==='hash_not_found') vStatus.innerHTML='<span class="pill bad" role="status">❌ Not found</span>';
        else vStatus.innerHTML='<span class="pill bad" role="status">❌ Invalid</span>';

        const norm={ ok:n.ok, found, hash:n.hash||h, timestamp:n.timestamp||null, signature:n.signature||null, type:n.type||null, meta:n.meta||null };
        set('verify-summary', `
          <div class="row"><span class="k">Hash</span><span class="v">${short(norm.hash)}</span></div>
          <div class="row"><span class="k">Found</span><span class="v">${norm.found?'Yes':'No'}</span></div>
          <div class="row"><span class="k">Timestamp</span><span class="v">${fmt(norm.timestamp)}</span></div>
          <div class="row"><span class="k">Signature</span><span class="v">${norm.signature?short(norm.signature):'—'}</span></div>
        `);
        vOutput.textContent=JSON.stringify(norm,null,2);
        vOpen.href=`/verify.html?hash=${encodeURIComponent(norm.hash)}`;
        vOpen.style.display='inline-block';
      }catch(e){
        vStatus.innerHTML=`<span class="pill bad" role="alert">❌ ${String(e.message||e)}</span>`;
      }finally{
        btnVerify.disabled=false;
      }
    };
  </script>
</body>
</html>
